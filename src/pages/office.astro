---
import Layout from "../layouts/Layout.astro";
import PageFooter from "../components/PageFooter.astro";
import Header from "../components/Header.astro";
import Image from "astro/components/Image.astro";
import OfficeBgImg from "../assets/images/office.png";
import OfficeImg1 from "../assets/images/office-1.png";
import OfficeImg2 from "../assets/images/office-2.png";
import OfficeImg3 from "../assets/images/office-3.png";
import OfficeImg4 from "../assets/images/office-4.png";
import OfficeImg5 from "../assets/images/office-5.png";
import OfficeImg6 from "../assets/images/office-6.png";
import OfficeImg7 from "../assets/images/office-7.png";
import OfficeImg8 from "../assets/images/office-8.png";
import OfficeImg9 from "../assets/images/office-9.png";
import OfficeImg10 from "../assets/images/office-10.png";

---

<Layout title="Kohei Korada â€” Office">
  <Header />
  <span class="kh">(C)KOHEI HARADA</span>
  <section class="office">
    <div class="office__top">
      <Image
        src={OfficeBgImg}
        width={1280}
        height={800}
        alt="Office"
        class:list={"office__top-img"}
      />
    </div>
    <div class="office__map">
      <div class="office__map-info">
        <b class="office__map-info-title font-title">OFFICE</b>
        <p class="office__map-info-descr font-text-content">
          Anemoon8 2631VR Nootdorp Netherlands
        </p>
      </div>
      <iframe
        class="office__map-iframe"
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2454.1430288356405!2d4.400906841822878!3d52.0407078992603!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47c5c9e8a545d5cf%3A0xe38ff8855243584b!2zMjYzMSBWUiDQndC-0YLQtNC-0YDQvywg0J3QuNC00LXRgNC70LDQvdC00Ys!5e0!3m2!1sru!2sjp!4v1735111092407!5m2!1sru!2sjp"
        width="600"
        height="450"
        style="border:0;"
        allowfullscreen=""
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
    <div class="gallery-pin-conatiner">
      <div class="gallery-pin-conatiner__progress"></div>
      <div class="gallery-wrap">
        <div class="gallery__container">
          <article class="article gallery desktop">
            <div class="gallery__item">
              <div class="gallery__inner">
                <Image
                src={OfficeImg1}
                width={1280}
                height={800}
                alt="Office"
                class:list={"gallery__img desktop"}
              />
              </div>
            </div>
            <div class="gallery__item">
              <div class="gallery__inner">
                <Image
                src={OfficeImg2}
                width={1280}
                height={800}
                alt="Office"
                class:list={"gallery__img desktop"}
              />
              </div>
            </div>
            <div class="gallery__item">
              <div class="gallery__inner">
                <Image
                src={OfficeImg3}
                width={1280}
                height={800}
                alt="Office"
                class:list={"gallery__img desktop"}
              />
              </div>
            </div>
            <div class="gallery__item">
              <div class="gallery__inner">
                <Image
                src={OfficeImg4}
                width={1280}
                height={800}
                alt="Office"
                class:list={"gallery__img desktop"}
              />
              </div>
            </div>
            <div class="gallery__item">
              <div class="gallery__inner">
                <Image
                src={OfficeImg5}
                width={1280}
                height={800}
                alt="Office"
                class:list={"gallery__img desktop"}
              />
              </div>
            </div>
            <div class="gallery__item">
                <div class="gallery__inner">
                  <Image
                  src={OfficeImg6}
                  width={1280}
                  height={800}
                  alt="Office"
                  class:list={"gallery__img desktop"}
                />
                </div>
              </div>
              <div class="gallery__item">
                <div class="gallery__inner">
                  <Image
                  src={OfficeImg7}
                  width={1280}
                  height={800}
                  alt="Office"
                  class:list={"gallery__img desktop"}
                />
                </div>
              </div>
              <div class="gallery__item">
                <div class="gallery__inner">
                  <Image
                  src={OfficeImg8}
                  width={1280}
                  height={800}
                  alt="Office"
                  class:list={"gallery__img desktop"}
                />
                </div>
              </div>
              <div class="gallery__item">
                <div class="gallery__inner">
                  <Image
                  src={OfficeImg9}
                  width={1280}
                  height={800}
                  alt="Office"
                  class:list={"gallery__img desktop"}
                />
                </div>
              </div>
              <div class="gallery__item">
                <div class="gallery__inner">
                  <Image
                  src={OfficeImg10}
                  width={1280}
                  height={800}
                  alt="Office"
                  class:list={"gallery__img desktop"}
                />
                </div>
              </div>
          </article>
        </div>
      </div>
    </div>
  </section>
  <style lang="scss">
    .kh {
        position: fixed;
        font-size: 14px;
        bottom: 14px;
        right: 16px;
        z-index: 1000;
    }
    .office {
      display: flex;
      flex-direction: column;
      &__top {
        width: 100%;
        height: 100vh;
        display: flex;
        &-img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
      }
      &__map {
        height: 100vh;
        display: flex;
        align-items: center;
        width: 100%;
        margin-bottom: 100px;
        // max-width: 1280px;
        margin-inline: auto;
        justify-content: center;
        &-info {
          display: flex;
          flex-direction: column;
          margin-right: 90px;
          width: 40%;
          align-items: flex-end;
          text-align: left;
          &-title {
            text-transform: uppercase;
            font-size: 54px;
            line-height: 54px;
            margin-bottom: 11px;
          }
          &-descr {
            font-size: 16px;
            line-height: 24px;
          }
        }
        &-iframe {
          height: 100%;
          filter: grayscale(0.8);
          flex-grow: 2;
        }
      }
    }

    .gallery {
      padding: 0;
    }
    .gallery-pin-container {
      /* overflow: hidden; */
    }
    .gallery-pin-conatiner__progress {
      position: fixed;
      left: 0;
      bottom: 0;
      width: 100%;
      height: 4px;
      background-color: rgba(1, 1, 1, 1);
      transform: translateX(-100%);
      transition: 0.4s opacity;
    }
    .gallery-pin-conatiner__progress--hidden {
      opacity: 0;
      pointer-events: none;
    }
    .gallery:not(:last-child) {
      margin-bottom: 64px;
    }
    .gallery__item {
    }
    .gallery__img {
      width: 100%;
      height: 100%;
    }
    .gallery__item:first-child .gallery__img {
      border-radius: 8px 8px 0 0;
    }
    .gallery__item:last-child .gallery__img {
      border-radius: 0 0 8px 8px;
    }
    .content__inner {
      display: flex;
      flex-direction: column;
    }
    .gallery.desktop {
      min-height: 100%;
      position: absolute;
      display: flex;
      flex-direction: column;
      top: 0;
      border-radius: 0;
      width: 100%;
      align-items: center;
    }
    .gallery-wrap {
      height: 500vh;
    }
    .gallery.desktop .gallery__item {
      position: absolute;
    }
    .gallery.desktop .gallery__item:first-child {
      z-index: 10;
    }
    .gallery.desktop .gallery__item:nth-child(2) {
      z-index: 9;
    }
    .gallery.desktop .gallery__item:nth-child(3) {
      z-index: 8;
    }
    .gallery.desktop .gallery__item:nth-child(4) {
      z-index: 7;
    }
    .gallery.desktop .gallery__item:nth-child(5) {
      z-index: 6;
    }
    .gallery.desktop .gallery__item:nth-child(6) {
      z-index: 5;
    }
    .gallery.desktop .gallery__item:nth-child(7) {
      z-index: 4;
    }
    .gallery.desktop .gallery__item:nth-child(8) {
      z-index: 3;
    }
    .gallery.desktop .gallery__item:nth-child(9) {
      z-index: 2;
    }
    .gallery.desktop .gallery__item:last-child {
      z-index: 1;
    }
    .gallery__container {
      margin-inline: auto;
      height: calc(100vh - 180px);
      overflow-y: hidden;
      display: flex;
      flex-direction: column;
      position: relative;
      margin-inline: 119px;
      position: sticky;
      top: 90px;
    }
    .gallery__item {
      min-height: 100%;
      min-height: 100%;
      width: 100%;
      height: 100%;
      flex-grow: 2;
      display: flex;
      background-color: #000;
    }
    .gallery__inner {
      min-height: 100%;
      width: 100%;
      display: flex;
    }
    .gallery__inner picture {
      width: 100%;
    }
    .gallery__img {
      object-fit: cover;
    }
  </style>
  <script>
    import gsap from "gsap";
    import ScrollTrigger from "gsap/ScrollTrigger";
    gsap.registerPlugin(ScrollTrigger);
    gsap.set(".gallery.desktop .gallery__item:not(:last-child)", {
      filter: "brightness(1)",
    });
    const clipAnimation = gsap.to(
      ".gallery.desktop .gallery__item:not(:last-child)",
      {
        clipPath() {
          return "inset(0 0 100% 0)";
        },
        filter: "brightness(0)",
        stagger: 0.5,
      }
    );
    const items = Array.from(document.querySelectorAll(".slider__item"));
    ScrollTrigger.create({
      trigger: ".gallery-wrap",
      start: "top top",
      end: "bottom bottom",
      animation: clipAnimation,
      scrub: 2,
    });
    gsap.to(".gallery-pin-conatiner__progress", {
      x: 0,
      scrollTrigger: {
        trigger: ".gallery-pin-conatiner",
        start: "top top",
        end: "bottom bottom",
        stagger: 0.5,
        scrub: 2,
        onUpdate: (self) => {
          const progress = self.progress;
          if (progress === 1 || progress === 0) {
            document
              .querySelector(".gallery-pin-conatiner__progress")
              .classList.add("gallery-pin-conatiner__progress--hidden");
          } else {
            document
              .querySelector(".gallery-pin-conatiner__progress")
              .classList.remove("gallery-pin-conatiner__progress--hidden");
          }
        },
      },
    });
  </script>
</Layout>
